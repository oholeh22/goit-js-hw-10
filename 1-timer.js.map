{"version":3,"file":"1-timer.js","sources":["../src/js/1-timer.js"],"sourcesContent":["import flatpickr from \"flatpickr\";\nimport \"flatpickr/dist/flatpickr.min.css\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet selectedDate;\nlet clockTimer;\n\nconst timerDays = document.querySelector('span[data-days]');\nconst timerHours = document.querySelector('span[data-hours]');\nconst timerMinutes = document.querySelector('span[data-minutes]');\nconst timerSeconds = document.querySelector('span[data-seconds]');\nconst startBtn = document.querySelector(\".js-start\");\n\nconst options = {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n  onClose(selectedDates) {\n    if (new Date().getTime() > selectedDates[0].getTime()) {\n      window.alert(\"Please choose a date in the future\");\n      showErrorToast(); \n      startBtn.disabled = true; \n    } else {\n      selectedDate = selectedDates[0]; \n      startBtn.disabled = false; \n    }\n  },\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  flatpickr(\"#datetime-picker\", options);\n\n  startBtn.addEventListener(\"click\", () => {\n    console.log(\"Start button clicked\");\n\n    if (selectedDate) {\n      startBtn.disabled = true;\n      clockTimer = setInterval(() => {\n        const now = new Date().getTime();\n        const difference = selectedDate.getTime() - now;\n        \n        if (difference < 1000) {\n          clearInterval(clockTimer);\n          updateTimer({ days: 0, hours: 0, minutes: 0, seconds: 0 });\n          console.log(\"Timer ended\");\n        } else {\n          const time = convertMs(difference);\n          console.log(\"Time left:\", time);\n          updateTimer(time);\n        }\n      }, 1000);\n    } else {\n      showErrorToast(); \n    }\n  });\n});\n\nconst showErrorToast = () => {\n  iziToast.error({\n    title: 'Error',\n    message: 'Please choose a date in the future',\n    position: 'topRight',\n    color: '#ef4040',\n    titleColor: '#fff',\n    titleSize: '16px',\n    titleLineHeight: '150%',\n    messageColor: '#fff',\n    messageSize: '16px',\n    messageLineHeight: '150%',\n  });\n};\n\nconst addZero = (num) => (num < 10 ? `0${num}` : num);\n\nfunction updateTimer({ days, hours, minutes, seconds }) {\n  if (timerDays) timerDays.textContent = addZero(days);\n  if (timerHours) timerHours.textContent = addZero(hours);\n  if (timerMinutes) timerMinutes.textContent = addZero(minutes);\n  if (timerSeconds) timerSeconds.textContent = addZero(seconds);\n}\n\nfunction convertMs(ms) {\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  const days = Math.floor(ms / day);\n  const hours = Math.floor((ms % day) / hour);\n  const minutes = Math.floor(((ms % day) % hour) / minute);\n  const seconds = Math.floor((((ms % day) % hour) % minute) / second);\n\n  return { days, hours, minutes, seconds };\n}\n\n  "],"names":["selectedDate","clockTimer","timerDays","timerHours","timerMinutes","timerSeconds","startBtn","options","selectedDates","showErrorToast","flatpickr","now","difference","updateTimer","time","convertMs","iziToast","addZero","num","days","hours","minutes","seconds","ms"],"mappings":"iyBAKA,IAAIA,EACAC,EAEJ,MAAMC,EAAY,SAAS,cAAc,iBAAiB,EACpDC,EAAa,SAAS,cAAc,kBAAkB,EACtDC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAe,SAAS,cAAc,oBAAoB,EAC1DC,EAAW,SAAS,cAAc,WAAW,EAE7CC,EAAU,CACd,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACjB,QAAQC,EAAe,CACjB,IAAI,KAAI,EAAG,QAAO,EAAKA,EAAc,CAAC,EAAE,WAC1C,OAAO,MAAM,oCAAoC,EACjDC,IACAH,EAAS,SAAW,KAEpBN,EAAeQ,EAAc,CAAC,EAC9BF,EAAS,SAAW,GAEvB,CACH,EAEA,SAAS,iBAAiB,mBAAoB,IAAM,CAClDI,EAAU,mBAAoBH,CAAO,EAErCD,EAAS,iBAAiB,QAAS,IAAM,CACvC,QAAQ,IAAI,sBAAsB,EAE9BN,GACFM,EAAS,SAAW,GACpBL,EAAa,YAAY,IAAM,CAC7B,MAAMU,EAAM,IAAI,KAAM,EAAC,QAAO,EACxBC,EAAaZ,EAAa,QAAO,EAAKW,EAE5C,GAAIC,EAAa,IACf,cAAcX,CAAU,EACxBY,EAAY,CAAE,KAAM,EAAG,MAAO,EAAG,QAAS,EAAG,QAAS,CAAC,CAAE,EACzD,QAAQ,IAAI,aAAa,MACpB,CACL,MAAMC,EAAOC,EAAUH,CAAU,EACjC,QAAQ,IAAI,aAAcE,CAAI,EAC9BD,EAAYC,CAAI,CACjB,CACF,EAAE,GAAI,GAEPL,GAEN,CAAG,CACH,CAAC,EAED,MAAMA,EAAiB,IAAM,CAC3BO,EAAS,MAAM,CACb,MAAO,QACP,QAAS,qCACT,SAAU,WACV,MAAO,UACP,WAAY,OACZ,UAAW,OACX,gBAAiB,OACjB,aAAc,OACd,YAAa,OACb,kBAAmB,MACvB,CAAG,CACH,EAEMC,EAAWC,GAASA,EAAM,GAAK,IAAIA,CAAG,GAAKA,EAEjD,SAASL,EAAY,CAAE,KAAAM,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAClDpB,IAAWA,EAAU,YAAce,EAAQE,CAAI,GAC/ChB,IAAYA,EAAW,YAAcc,EAAQG,CAAK,GAClDhB,IAAcA,EAAa,YAAca,EAAQI,CAAO,GACxDhB,IAAcA,EAAa,YAAcY,EAAQK,CAAO,EAC9D,CAEA,SAASP,EAAUQ,EAAI,CAMrB,MAAMJ,EAAO,KAAK,MAAMI,EAAK,KAAG,EAC1BH,EAAQ,KAAK,MAAOG,EAAK,MAAO,IAAI,EACpCF,EAAU,KAAK,MAAQE,EAAK,MAAO,KAAQ,GAAM,EACjDD,EAAU,KAAK,MAASC,EAAK,MAAO,KAAQ,IAAU,GAAM,EAElE,MAAO,CAAE,KAAAJ,EAAM,MAAAC,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC"}